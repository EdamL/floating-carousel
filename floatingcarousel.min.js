/*
* floatingCarousel 3.0 - jQuery plugin
* Copyright (c) 2017 Adam Lafene
*
* Licensed under the terms of the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*/
(function(d){d.fn.floatingCarousel=function(v,w){if(1<this.length){var B=[];this.each(function(a){B.push(d(this).floatingCarousel(v,a))});return B}var a=d.extend({},d().floatingCarousel.defaults,v),x,p;this.destroy=function(){var a=this;d(a).removeData("floatingCarousel");a.children(":eq(1)").remove();0<d(this).find("> div").length?(a[0].innerHTML=d(this).find("> div")[0].innerHTML,a.children().each(function(){d(this,a)[0].style.cssText=""})):a.find("li").each(function(){d(this,a)[0].style.cssText=
""});a.children()[0].style.cssText="";a[0].style.cssText="";a.unbind()};this.update=function(p){a=null;a=d.extend({},d().floatingCarousel.defaults,p);this.destroy(!0);return this.create()};this.create=function(w,t){if(!d(this).html())return!1;var b=this.addClass("floatingCarouselContainer");b.html();if(1==d(b).data("floatingCarousel")&&"pause"!=t)return this;null!=a.beforeCreateFunction&&d.isFunction(a.beforeCreateFunction)&&a.beforeCreateFunction.call(b);var h=0,c,k,r,y=!1,l={},e=b[0];e.style.paddingLeft=
"0";e.style.paddingRight="0";var m=e.offsetWidth;switch(b.children()[0].nodeName.toLowerCase()){case "div":t||(e.innerHTML="<div>"+b[0].innerHTML+"</div>",e.innerHTML+=e.innerHTML);var f=b.children("div");var q=f.eq(0).children("div").css("float","left");break;case "ul":t||(e.innerHTML+=e.innerHTML);f=b.find("ul");q=b.find("ul:first > li").css("float","left");break;case "ol":t||(e.innerHTML+=e.innerHTML);f=b.find("ol");q=b.find("ol:first > li").css("float","left");break;default:return console.log("unable to initialise scroller - please ensure contents are either in a UL, an OL or in DIVs"),
!1}switch(a.scrollSpeed.toLowerCase()){case "slow":var u=1;break;case "fast":u=4;break;default:u=2}var g=0,A=0,z=0;switch(a.scrollerAlignment.toLowerCase()){case "vertical":d(q).each(function(a){a=d(this,b);g+=d(this,b).outerHeight(!0);a[0].offsetWidth>z&&(z=a[0].offsetWidth)});break;default:d(q).each(function(a){a=d(this,b);g+=d(this,b).outerWidth(!0);a[0].offsetHeight>A&&(A=a[0].offsetHeight)})}if(!t){"vertical"!=a.scrollerAlignment.toLowerCase()?e.style.height=A+"px":(e.style.width=z+"px",e.style.height=
0<d(e).height()?d(e).height()+"px":d(e).parent().height()+"px",m=e.offsetHeight);if(g>m)q=Math.round(g/100*a.scrollerOffset)-Math.round(m/2),q>g-m&&(q=g-m);else return d(f[1]).remove(),null!=a.afterCreateFunction&&d.isFunction(a.afterCreateFunction)&&a.afterCreateFunction.call(b),!1;e.style.overflow="hidden";e.style.position="relative";f.each(function(){var n=d(this,b);n.css("position","absolute");"vertical"!=a.scrollerAlignment.toLowerCase()?n.css({top:0,width:g}):n.css({left:0,height:g,width:z});
d(this).children().each(function(n){n=d(this,b);"vertical"!=a.scrollerAlignment.toLowerCase()?n.css("float","left"):n.css("float","");n.css("position","static")})});"vertical"!=a.scrollerAlignment.toLowerCase()?(f[0].style.left=0<q?"-"+q+"px":"0",1==a.looped?f[1].style.left=f[0].offsetLeft-g+"px":(f[1].style.display="none",f[1].style.top="-1000px")):(f[0].style.top=0<q?"-"+q+"px":"0",1==a.looped?f[1].style.top=f[0].offsetTop-g+"px":(f[1].style.display="none",f[1].style.left="-1000px"));var v=function(a){var c=
{x:0,y:0};if(a.changedTouches)a=a.changedTouches[0],c.x=a.pageX,c.y=a.pageY;else if(a.pageX||a.pageY)c.x=a.pageX,c.y=a.pageY;else{var b=document.documentElement,n=document.body;c.x=a.clientX+((b.scrollLeft||n.scrollLeft)-(b.clientLeft||0));c.y=a.clientY+((b.scrollTop||n.scrollTop)-(b.clientTop||0))}cursorPosition=c};b[0].addEventListener("touchstart",function(){y=a.enableTouchEvents||!1;l.startCarousel()});b[0].addEventListener("touchend",function(){l.stopCarousel(!0);1==a.autoScroll&&l.autoScroll()});
b[0].addEventListener("touchmove",function(a){v(a)});b.mouseenter(function(){y||l.startCarousel()});b.mouseleave(function(){y||(l.stopCarousel(!0),1==a.autoScroll&&l.autoScroll())});b.mousemove(function(a){y||v(a)})}l.autoScroll=function(){var b=40;0!=a.looped&&(p&&(clearInterval(p),p=0),c=c?c:"vertical"!=a.scrollerAlignment.toLowerCase()?parseInt(f[0].style.left):parseInt(f[0].style.top),a.autoScrollSpeed=1E3>a.autoScrollSpeed?1E3:a.autoScrollSpeed,a.autoScrollSpeed/b<m?k=Math.round(m/(a.autoScrollSpeed/
b)):(k=1,b=Math.round(a.autoScrollSpeed/m)),p=setInterval(function(){switch(a.autoScrollDirection.toLowerCase()){case "right":case "down":c+k>g?(c=0,h=0==h?1:0):c+=k;break;default:c-k<0-(g-m)?(c=m,h=0==h?1:0):c-=k}"vertical"!=a.scrollerAlignment.toLowerCase()?(f[h].style.left=c+"px",f[0==h?1:0].style.left=c-g+"px"):(f[h].style.top=c+"px",f[0==h?1:0].style.top=c-g+"px")},b))};l.startCarousel=function(){p&&(clearInterval(p),p=0);r="vertical"!=a.scrollerAlignment.toLowerCase()?Math.round(d(e).offset().left+
e.offsetWidth/2):Math.round(d(e).offset().top+e.offsetHeight/2);c=c?c:"vertical"!=a.scrollerAlignment.toLowerCase()?parseInt(f[0].style.left):parseInt(f[0].style.top);x=setInterval(function(){var b="vertical"!=a.scrollerAlignment.toLowerCase()?cursorPosition.x:cursorPosition.y,d=m/2;var e=b<r?r-b:b-r;k=e<Math.ceil(d/100*30)?1:e<Math.ceil(d/100*50)?2*u:e<Math.ceil(d/100*70)?3*u:e<Math.ceil(d/100*90)?4*u:6*u;b<r?0<c+k&&0==a.looped?c=0:c+k>g?(c=0,h=0==h?1:0):c+=k:b>r&&(c-k<0-(g-m)?0==a.looped?c=0-(g-
m):(c=m,h=0==h?1:0):c-=k);"vertical"!=a.scrollerAlignment.toLowerCase()?(f[h].style.left=c+"px",f[0==h?1:0].style.left=c-g+"px"):(f[h].style.top=c+"px",f[0==h?1:0].style.top=c-g+"px")},40)};l.stopCarousel=function(b){if(x&&(clearInterval(x),x=0,b&&0!=a.looped&&1!=a.autoScroll&&1<k)){var d=0;for(b=k;1<b;b--)d+=b;var e="vertical"!=a.scrollerAlignment.toLowerCase()?cursorPosition.x:cursorPosition.y;e<r?c+d>g&&(c-=g,h=0==h?1:0):c-d<0-(g-m)&&(c+=g,h=0==h?1:0);var n=setInterval(function(){1<k?(c=e<r?c+
k:c-k,"vertical"!=a.scrollerAlignment.toLowerCase()?(f[h].style.left=c+"px",f[0==h?1:0].style.left=c-g+"px"):(f[h].style.top=c+"px",f[0==h?1:0].style.top=c-g+"px"),k--):clearInterval(n)},50)}};"pause"!=t&&1==a.autoScroll&&l.autoScroll();switch(t){case "pause":l.stopCarousel();p&&(clearInterval(p),p=0);b.unbind("mouseenter");b.unbind("mouseleave");d(b).data("floatingCarousel",!1);return;case "play":d("html").mousemove(function(c){var e={x:0,y:0};if(c.pageX||c.pageY)e.x=c.pageX,e.y=c.pageY;else{var f=
document.documentElement,g=document.body;e.x=c.clientX+(f.scrollLeft||g.scrollLeft)-(f.clientLeft||0);e.y=c.clientY+(f.scrollTop||g.scrollTop)-(f.clientTop||0)}cursorPosition=e;cursorPosition.x>=b.offset().left&&cursorPosition.x<=b.offset().left+b[0].offsetWidth&&cursorPosition.y>=b.offset().top&&cursorPosition.y<=b.offset().top+b[0].offsetHeight&&l.startCarousel();b.mouseenter(function(){l.startCarousel()});b.mouseleave(function(){l.stopCarousel(!0);1==a.autoScroll&&l.autoScroll()});d(this).unbind("mousemove");
1==a.autoScroll&&l.autoScroll()})}d(b).data("floatingCarousel",!0);null!=a.afterCreateFunction&&d.isFunction(a.afterCreateFunction)&&a.afterCreateFunction.call(b);return this};this.pause=function(){this.create(w,"pause")};this.play=function(){this.create(w,"play")};return this.create(w)};jQuery.fn.floatingCarousel.defaults={autoScroll:!1,autoScrollDirection:"left",autoScrollSpeed:1E4,looped:!0,scrollerAlignment:"horizontal",scrollerOffset:0,scrollSpeed:"medium",beforeCreateFunction:null,afterCreateFunction:null,
enableTouchEvents:!0}})(jQuery);